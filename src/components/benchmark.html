<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <header>
      <div>
        <img src="../img/epicode_logo.png" />
      </div>
    </header>
    <main>
      <div>
        <h1 id="titolo_domanda">How can I create</h1>
      </div>
      <div style="height: 300px">
        <button id="risposta_1">Question1</button>
        <button id="risposta_2">Question2</button>
        <button id="risposta_3">Question3</button>
        <button id="risposta_4">Question4</button>
      </div>
      <div>
        <p>Question</p>
      </div>

      <script>
        let quantita = 10;
        let livello = "easy";
        let domande = [];
        let titolo = document.getElementById("titolo_domanda");
        let is_boolean = false;
        let completa = true;

        fetch(
          `https://opentdb.com/api.php?amount=${quantita}&category=18&difficulty=${livello}`
        )
          .then((response) => response.json())
          .then((domande) => {
            domande = domande.results;
            // console.log(domande);

            for (let i = 0; i < domande.length; i++) {
              const domanda = domande[i];
              let risposte = [];
              // console.log(domanda)
              titolo.innerHTML = domanda.question;
              risposte.push(domanda.correct_answer);
              for (const risposta of domanda.incorrect_answers) {
                risposte.push(risposta);
              }
              console.log(risposte);
              shuffle(risposte);

              // console.log(is_boolean)
              switch (domanda.type) {
                case "boolean":
                  is_boolean = true;
                  domanda_bool(risposte);
                  break;

                case "multiple":
                  is_boolean = false;
                  break;

                default:
                  break;
              }
            }

            function domanda_bool(risposte) {
              let pulsante_1 = document.getElementById("risposta_1");
              let pulsante_2 = document.getElementById("risposta_2");
              let pulsante_3 = document.getElementById("risposta_3");
              let pulsante_4 = document.getElementById("risposta_4");

              pulsante_1.innerHTML = risposte[0];
              pulsante_2.innerHTML = risposte[1];
              pulsante_3.classList.add("nascondi");
              pulsante_4.classList.add("nascondi");
            }

            function shuffle(array) {
              let currentIndex = array.length,
                randomIndex;

              // While there remain elements to shuffle.
              while (currentIndex != 0) {
                // Pick a remaining element.
                randomIndex = Math.floor(Math.random() * currentIndex);
                currentIndex--;

                // And swap it with the current element.
                [array[currentIndex], array[randomIndex]] = [
                  array[randomIndex],
                  array[currentIndex],
                ];
              }

              return array;
            }
          });
      </script>
    </main>
  </body>
</html>
